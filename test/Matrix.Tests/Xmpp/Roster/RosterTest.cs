using System;
using System.Linq;

using Xunit;
using Matrix.Xml;
using Matrix.Xmpp.Bosh;
using Matrix.Xmpp.Client;
using Matrix.Xmpp.Roster;
using Shouldly;

namespace Matrix.Tests.Xmpp.Roster
{
    
    public class RosterTest
    {
        // response to a reoster request
        string xml1 = @"<iq to='juliet@example.com/balcony' type='result' id='roster_1'>
  <query xmlns='jabber:iq:roster'>
    <item jid='romeo@example.net'
          name='Romeo'
          subscription='both'>
      <group>Friends</group>
    </item>
    <item jid='mercutio@example.org'
          name='Mercutio'
          subscription='from'>
      <group>Friends</group>
    </item>
    <item jid='benvolio@example.org'
          name='Benvolio'
          subscription='both'>
        <group>Friends</group>
        <group>Friends2</group>
<group>Friends3</group>
    </item>
  </query>
</iq>";

        // item with 3 3roups
        string xml2 = @"<item jid='benvolio@example.org'
            xmlns='jabber:iq:roster' 
            name='Benvolio'
            subscription='both'>
        <group>Friends</group>
        <group>Friends2</group>
        <group>Friends3</group>
    </item>";

        // item with no groups
        string xml3 = @"
    <item jid='benvolio@example.org'
            xmlns='jabber:iq:roster' 
            name='Benvolio'
            subscription='both'/>";

        string xml4 = @"<item jid='benvolio@example.org'
            xmlns='jabber:iq:roster' 
            name='Benvolio'
            subscription='both'
            approved='true'/>";

        string xml5 = @"<item jid='benvolio@example.org'
            xmlns='jabber:iq:roster' 
            ask='subscribe'/>";

        string xml6 = @"<item jid='benvolio@example.org'
            xmlns='jabber:iq:roster' 
            subscription='from'
            ask='unsubscribe'/>";

        string xml7 = @"<item jid='benvolio@example.org'
            xmlns='jabber:iq:roster'/>";


        string xml8 = "<body xmlns='http://jabber.org/protocol/httpbind' ack='489157399'><iq xmlns=\"jabber:client\" type=\"result\" id=\"MX_4\" to=\"admin.mcojw-agent @mcojwvmgw/MatriX\"><query xmlns=\"jabber:iq:roster\"><item jid=\"lamun356-agent @mcojwvmgw\" name=\"lamun356-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mbjoh174-agent @mcojwvmgw\" name=\"mbjoh174-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"nrahh435-agent @mcojwvmgw\" name=\"nrahh435-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"alee008-agent @mcojwvmgw\" name=\"alee008-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"idela003-agent @mcojwvmgw\" name=\"idela003-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"grdom485-agent @mcojwvmgw\" name=\"grdom485-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"spmcc693-agent @mcojwvmgw\" name=\"spmcc693-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"icald767-agent @mcojwvmgw\" name=\"icald767-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"vmres339-agent @mcojwvmgw\" name=\"vmres339-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"smasc086-agent @mcojwvmgw\" name=\"smasc086-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cdvrc098-agent @mcojwvmgw\" name=\"cdvrc098-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jacar250-agent @mcojwvmgw\" name=\"jacar250-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cnsha395-agent @mcojwvmgw\" name=\"cnsha395-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aaoma303-agent @mcojwvmgw\" name=\"aaoma303-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"mccle302-agent @mcojwvmgw\" name=\"mccle302-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"srcru374-agent @mcojwvmgw\" name=\"srcru374-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"abbur603-agent @mcojwvmgw\" name=\"abbur603-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"hpham689-agent @mcojwvmgw\" name=\"hpham689-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mmcgu302-agent @mcojwvmgw\" name=\"mmcgu302-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"npoe360-agent @mcojwvmgw\" name=\"npoe360-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmcre041-agent @mcojwvmgw\" name=\"jmcre041-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"fscan542-agent @mcojwvmgw\" name=\"fscan542-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ssaga371-agent @mcojwvmgw\" name=\"ssaga371-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jpoo040-agent @mcojwvmgw\" name=\"jpoo040-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cacas326-agent @mcojwvmgw\" name=\"cacas326-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cpeti126-agent @mcojwvmgw\" name=\"cpeti126-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jroman-agent @mcojwvmgw\" name=\"jroman-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"fdrob353-agent @mcojwvmgw\" name=\"fdrob353-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cawhi362-agent @mcojwvmgw\" name=\"cawhi362-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"bbutl388-agent @mcojwvmgw\" name=\"bbutl388-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"erler569-agent @mcojwvmgw\" name=\"erler569-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cgugi336-agent @mcojwvmgw\" name=\"cgugi336-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"lsiba487-agent @mcojwvmgw\" name=\"lsiba487-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"smurc376-agent @mcojwvmgw\" name=\"smurc376-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"efort005-agent @mcojwvmgw\" name=\"efort005-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jguna246-agent @mcojwvmgw\" name=\"jguna246-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mjcan762-agent @mcojwvmgw\" name=\"mjcan762-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jedur642-agent @mcojwvmgw\" name=\"jedur642-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mmmcc148-agent @mcojwvmgw\" name=\"mmmcc148-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"encor241-agent @mcojwvmgw\" name=\"encor241-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"lwint333-agent @mcojwvmgw\" name=\"lwint333-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"clhow072-agent @mcojwvmgw\" name=\"clhow072-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"eortiz-agent @mcojwvmgw\" name=\"eortiz-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jagui544-agent @mcojwvmgw\" name=\"jagui544-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rkock486-agent @mcojwvmgw\" name=\"rkock486-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"lsant375-agent @mcojwvmgw\" name=\"lsant375-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"piort850-agent @mcojwvmgw\" name=\"piort850-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"dmosl085-agent @mcojwvmgw\" name=\"dmosl085-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ivr.mcorz-agent @mcojwvmgw\" name=\"ivr.mcorz-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"bboyd291-agent @mcojwvmgw\" name=\"bboyd291-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"clbil8121-agent @mcojwvmgw\" name=\"clbil8121-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rsgat663-agent @mcojwvmgw\" name=\"rsgat663-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mebon317-agent @mcojwvmgw\" name=\"mebon317-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"smoha844-agent @mcojwvmgw\" name=\"smoha844-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cbenson-agent @mcojwvmgw\" name=\"cbenson-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"bcast388-agent @mcojwvmgw\" name=\"bcast388-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"omsch695-agent @mcojwvmgw\" name=\"omsch695-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cvale382-agent @mcojwvmgw\" name=\"cvale382-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"adil318-agent @mcojwvmgw\" name=\"adil318-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ttsny017-agent @mcojwvmgw\" name=\"ttsny017-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"wpach136-agent @mcojwvmgw\" name=\"wpach136-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"hfigu881-agent @mcojwvmgw\" name=\"hfigu881-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ivr-agent @mcojwvmgw\" name=\"ivr-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"tdpow018-agent @mcojwvmgw\" name=\"tdpow018-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ldson360-agent @mcojwvmgw\" name=\"ldson360-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dbost424-agent @mcojwvmgw\" name=\"dbost424-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kmtho831-agent @mcojwvmgw\" name=\"kmtho831-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jcway409-agent @mcojwvmgw\" name=\"jcway409-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"opmat279-agent @mcojwvmgw\" name=\"opmat279-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cgrah329-agent @mcojwvmgw\" name=\"cgrah329-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmele627-agent @mcojwvmgw\" name=\"jmele627-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"froma717-agent @mcojwvmgw\" name=\"froma717-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gmsan471.mcorz-agent @mcojwvmgw\" name=\"gmsan471.mcorz-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"cconr130-agent @mcojwvmgw\" name=\"cconr130-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"fosupervisordl-agent @mcojwvmgw\" name=\"fosupervisordl-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"riang764-agent @mcojwvmgw\" name=\"riang764-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jpicc270-agent @mcojwvmgw\" name=\"jpicc270-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"bpros110-agent @mcojwvmgw\" name=\"bpros110-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dsaun457-agent @mcojwvmgw\" name=\"dsaun457-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"camth394-agent @mcojwvmgw\" name=\"camth394-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dpwan284-agent @mcojwvmgw\" name=\"dpwan284-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ljsan587-agent @mcojwvmgw\" name=\"ljsan587-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kbyro465-agent @mcojwvmgw\" name=\"kbyro465-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"padob878-agent @mcojwvmgw\" name=\"padob878-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"supervisor.mihdq-agent @mcojwvmgw\" name=\"supervisor.mihdq-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"cmrom847-agent @mcojwvmgw\" name=\"cmrom847-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gnegr252-agent @mcojwvmgw\" name=\"gnegr252-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"terin372-agent @mcojwvmgw\" name=\"terin372-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"tfada474-agent @mcojwvmgw\" name=\"tfada474-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"frodr578-agent @mcojwvmgw\" name=\"frodr578-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jfazz216-agent @mcojwvmgw\" name=\"jfazz216-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dalde252-agent @mcojwvmgw\" name=\"dalde252-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jrczu457-agent @mcojwvmgw\" name=\"jrczu457-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mahir314-agent @mcojwvmgw\" name=\"mahir314-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"omsmi551-agent @mcojwvmgw\" name=\"omsmi551-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"amman163-agent @mcojwvmgw\" name=\"amman163-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mdewe664-agent @mcojwvmgw\" name=\"mdewe664-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mjpar134-agent @mcojwvmgw\" name=\"mjpar134-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"klkho843-agent @mcojwvmgw\" name=\"klkho843-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"housekeeping-agent @mcojwvmgw\" name=\"housekeeping-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"vagar688-agent @mcojwvmgw\" name=\"vagar688-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mloai529-agent @mcojwvmgw\" name=\"mloai529-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"akitz353-agent @mcojwvmgw\" name=\"akitz353-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ftleo283-agent @mcojwvmgw\" name=\"ftleo283-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"sjama821-agent @mcojwvmgw\" name=\"sjama821-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gfshe334-agent @mcojwvmgw\" name=\"gfshe334-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jpmar676-agent @mcojwvmgw\" name=\"jpmar676-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"atpoc752-agent @mcojwvmgw\" name=\"atpoc752-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ojmob446-agent @mcojwvmgw\" name=\"ojmob446-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"leave356-agent @mcojwvmgw\" name=\"leave356-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"klebr011-agent @mcojwvmgw\" name=\"klebr011-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"tbtov845-agent @mcojwvmgw\" name=\"tbtov845-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"aocon150-agent @mcojwvmgw\" name=\"aocon150-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"evblo444-agent @mcojwvmgw\" name=\"evblo444-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jlvaz815-agent @mcojwvmgw\" name=\"jlvaz815-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jcgon300-agent @mcojwvmgw\" name=\"jcgon300-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cmhun840-agent @mcojwvmgw\" name=\"cmhun840-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jldem332-agent @mcojwvmgw\" name=\"jldem332-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"agill336-agent @mcojwvmgw\" name=\"agill336-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"cmann079-agent @mcojwvmgw\" name=\"cmann079-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gfroo709-agent @mcojwvmgw\" name=\"gfroo709-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aiang897-agent @mcojwvmgw\" name=\"aiang897-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"sniko265-agent @mcojwvmgw\" name=\"sniko265-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"tarog860-agent @mcojwvmgw\" name=\"tarog860-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"leadershipdl-agent @mcojwvmgw\" name=\"leadershipdl-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gguid795-agent @mcojwvmgw\" name=\"gguid795-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"avizu105-agent @mcojwvmgw\" name=\"avizu105-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jrspe494-agent @mcojwvmgw\" name=\"jrspe494-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"sgibb112-agent @mcojwvmgw\" name=\"sgibb112-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"pguyo392-agent @mcojwvmgw\" name=\"pguyo392-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kbmor436-agent @mcojwvmgw\" name=\"kbmor436-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"nhwil291-agent @mcojwvmgw\" name=\"nhwil291-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jtizo849-agent @mcojwvmgw\" name=\"jtizo849-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmgon011-agent @mcojwvmgw\" name=\"jmgon011-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aagua763-agent @mcojwvmgw\" name=\"aagua763-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ajana642-agent @mcojwvmgw\" name=\"ajana642-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kaben817-agent @mcojwvmgw\" name=\"kaben817-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jbest634-agent @mcojwvmgw\" name=\"jbest634-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"nahei670-agent @mcojwvmgw\" name=\"nahei670-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"admin.mcorz-agent @mcojwvmgw\" name=\"admin.mcorz-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jcnel435-agent @mcojwvmgw\" name=\"jcnel435-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"tcspi041-agent @mcojwvmgw\" name=\"tcspi041-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"bdeje446-agent @mcojwvmgw\" name=\"bdeje446-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mcann179-agent @mcojwvmgw\" name=\"mcann179-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"slsul010-agent @mcojwvmgw\" name=\"slsul010-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"eginn372-agent @mcojwvmgw\" name=\"eginn372-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"nmikh104-agent @mcojwvmgw\" name=\"nmikh104-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ghmor479-agent @mcojwvmgw\" name=\"ghmor479-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mmoli760-agent @mcojwvmgw\" name=\"mmoli760-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cmkel027-agent @mcojwvmgw\" name=\"cmkel027-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rmira582-agent @mcojwvmgw\" name=\"rmira582-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"skbra718-agent @mcojwvmgw\" name=\"skbra718-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"sorre602-agent @mcojwvmgw\" name=\"sorre602-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"overnon-agent @mcojwvmgw\" name=\"overnon-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rmolk739-agent @mcojwvmgw\" name=\"rmolk739-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cbgor073-agent @mcojwvmgw\" name=\"cbgor073-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cecav056-agent @mcojwvmgw\" name=\"cecav056-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jatru369-agent @mcojwvmgw\" name=\"jatru369-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"crcar305-agent @mcojwvmgw\" name=\"crcar305-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"twspa493-agent @mcojwvmgw\" name=\"twspa493-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ybola171-agent @mcojwvmgw\" name=\"ybola171-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ethom332-agent @mcojwvmgw\" name=\"ethom332-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jrber451-agent @mcojwvmgw\" name=\"jrber451-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mmrod535-agent @mcojwvmgw\" name=\"mmrod535-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmand621-agent @mcojwvmgw\" name=\"jmand621-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dague285-agent @mcojwvmgw\" name=\"dague285-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kgonz392-agent @mcojwvmgw\" name=\"kgonz392-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"alama014-agent @mcojwvmgw\" name=\"alama014-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rgste562-agent @mcojwvmgw\" name=\"rgste562-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mande587-agent @mcojwvmgw\" name=\"mande587-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gwsupportlast111424904 @mcojwvmgw\" name=\"gwsupportlast111424904\" subscription=\"both\"/><item jid=\"lfcha200-agent @mcojwvmgw\" name=\"lfcha200-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"nsanc697-agent @mcojwvmgw\" name=\"nsanc697-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aewit697-agent @mcojwvmgw\" name=\"aewit697-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jpmar763-agent @mcojwvmgw\" name=\"jpmar763-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"lmfor204-agent @mcojwvmgw\" name=\"lmfor204-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"snbur157-agent @mcojwvmgw\" name=\"snbur157-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"modreport-agent @mcojwvmgw\" name=\"modreport-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rhumb175-agent @mcojwvmgw\" name=\"rhumb175-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ndimu102-agent @mcojwvmgw\" name=\"ndimu102-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jinor618-agent @mcojwvmgw\" name=\"jinor618-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"wjean242-agent @mcojwvmgw\" name=\"wjean242-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"supervisor-agent @mcojwvmgw\" name=\"supervisor-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aglop231-agent @mcojwvmgw\" name=\"aglop231-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dmoca267-agent @mcojwvmgw\" name=\"dmoca267-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"eccar476-agent @mcojwvmgw\" name=\"eccar476-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mcruz189-agent @mcojwvmgw\" name=\"mcruz189-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mloso573-agent @mcojwvmgw\" name=\"mloso573-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmbac588-agent @mcojwvmgw\" name=\"jmbac588-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"msanc874-agent @mcojwvmgw\" name=\"msanc874-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"tdarn677-agent @mcojwvmgw\" name=\"tdarn677-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gwsupportlast111406677 @mcojwvmgw\" name=\"gwsupportlast111406677\" subscription=\"both\"/><item jid=\"mjbas801-agent @mcojwvmgw\" name=\"mjbas801-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"pfmon460-agent @mcojwvmgw\" name=\"pfmon460-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rmora138-agent @mcojwvmgw\" name=\"rmora138-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aeeng515-agent @mcojwvmgw\" name=\"aeeng515-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dgpas782-agent @mcojwvmgw\" name=\"dgpas782-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ecbla882-agent @mcojwvmgw\" name=\"ecbla882-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gjasm326-agent @mcojwvmgw\" name=\"gjasm326-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"pcard364-agent @mcojwvmgw\" name=\"pcard364-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aeath846-agent @mcojwvmgw\" name=\"aeath846-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rloui304-agent @mcojwvmgw\" name=\"rloui304-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"appel609-agent @mcojwvmgw\" name=\"appel609-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"coche120-agent @mcojwvmgw\" name=\"coche120-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ikhan454-agent @mcojwvmgw\" name=\"ikhan454-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jcfle791-agent @mcojwvmgw\" name=\"jcfle791-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gwsupportlast111426889 @mcojwvmgw\" name=\"gwsupportlast111426889\" subscription=\"both\"/><item jid=\"cburk237-agent @mcojwvmgw\" name=\"cburk237-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kjkol597-agent @mcojwvmgw\" name=\"kjkol597-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"amnel104-agent @mcojwvmgw\" name=\"amnel104-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dbudh119-agent @mcojwvmgw\" name=\"dbudh119-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dwbri122-agent @mcojwvmgw\" name=\"dwbri122-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gpalm216-agent @mcojwvmgw\" name=\"gpalm216-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"abflu197-agent @mcojwvmgw\" name=\"abflu197-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmay567-agent @mcojwvmgw\" name=\"jmay567-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ppaga492-agent @mcojwvmgw\" name=\"ppaga492-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"lcram502-agent @mcojwvmgw\" name=\"lcram502-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"acama005-agent @mcojwvmgw\" name=\"acama005-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jtril427-agent @mcojwvmgw\" name=\"jtril427-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kgrob119-agent @mcojwvmgw\" name=\"kgrob119-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aphil122-agent @mcojwvmgw\" name=\"aphil122-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"akara705-agent @mcojwvmgw\" name=\"akara705-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"maces143-agent @mcojwvmgw\" name=\"maces143-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"hspk-agent @mcojwvmgw\" name=\"hspk-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jhmed670-agent @mcojwvmgw\" name=\"jhmed670-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"isant223-agent @mcojwvmgw\" name=\"isant223-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"nbhor536-agent @mcojwvmgw\" name=\"nbhor536-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"vjmil323-agent @mcojwvmgw\" name=\"vjmil323-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"abarr112-agent @mcojwvmgw\" name=\"abarr112-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jksim088-agent @mcojwvmgw\" name=\"jksim088-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"nlenh295-agent @mcojwvmgw\" name=\"nlenh295-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ajmon115-agent @mcojwvmgw\" name=\"ajmon115-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"darro019-agent @mcojwvmgw\" name=\"darro019-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mgrif471-agent @mcojwvmgw\" name=\"mgrif471-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"salba757-agent @mcojwvmgw\" name=\"salba757-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dgabr429-agent @mcojwvmgw\" name=\"dgabr429-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"eales009-agent @mcojwvmgw\" name=\"eales009-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jswea033-agent @mcojwvmgw\" name=\"jswea033-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"fbleaders-agent @mcojwvmgw\" name=\"fbleaders-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"abaum692-agent @mcojwvmgw\" name=\"abaum692-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"stsch133-agent @mcojwvmgw\" name=\"stsch133-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jscan226-agent @mcojwvmgw\" name=\"jscan226-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"emgar463-agent @mcojwvmgw\" name=\"emgar463-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"pcrod094-agent @mcojwvmgw\" name=\"pcrod094-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mmart642-agent @mcojwvmgw\" name=\"mmart642-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"wjbak256-agent @mcojwvmgw\" name=\"wjbak256-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"emcdo609-agent @mcojwvmgw\" name=\"emcdo609-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kcraw511-agent @mcojwvmgw\" name=\"kcraw511-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jwdra459-agent @mcojwvmgw\" name=\"jwdra459-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"supervisor.mcorz-agent @mcojwvmgw\" name=\"supervisor.mcorz-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"lalva861-agent @mcojwvmgw\" name=\"lalva861-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"posto718-agent @mcojwvmgw\" name=\"posto718-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"atole089-agent @mcojwvmgw\" name=\"atole089-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jguar437-agent @mcojwvmgw\" name=\"jguar437-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"algri493-agent @mcojwvmgw\" name=\"algri493-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cvale619-agent @mcojwvmgw\" name=\"cvale619-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"pahow086-agent @mcojwvmgw\" name=\"pahow086-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"racol525-agent @mcojwvmgw\" name=\"racol525-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"eoval648-agent @mcojwvmgw\" name=\"eoval648-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mvizc388-agent @mcojwvmgw\" name=\"mvizc388-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"lbald362-agent @mcojwvmgw\" name=\"lbald362-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"canth394-agent @mcojwvmgw\" name=\"canth394-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jjtut426-agent @mcojwvmgw\" name=\"jjtut426-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"gwsupportlast111402773 @mcojwvmgw\" name=\"gwsupportlast111402773\" subscription=\"both\"/><item jid=\"nmcma181-agent @mcojwvmgw\" name=\"nmcma181-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"czipi252-agent @mcojwvmgw\" name=\"czipi252-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dosau085-agent @mcojwvmgw\" name=\"dosau085-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mnbou191-agent @mcojwvmgw\" name=\"mnbou191-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"aghar296-agent @mcojwvmgw\" name=\"aghar296-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"hldel437-agent @mcojwvmgw\" name=\"hldel437-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kvper169-agent @mcojwvmgw\" name=\"kvper169-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mariv328-agent @mcojwvmgw\" name=\"mariv328-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"oasou136-agent @mcojwvmgw\" name=\"oasou136-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mapar834-agent @mcojwvmgw\" name=\"mapar834-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"dmont189-agent @mcojwvmgw\" name=\"dmont189-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"anyou633-agent @mcojwvmgw\" name=\"anyou633-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jceva407-agent @mcojwvmgw\" name=\"jceva407-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jshow227-agent @mcojwvmgw\" name=\"jshow227-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kdenn370-agent @mcojwvmgw\" name=\"kdenn370-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmbaq288-agent @mcojwvmgw\" name=\"jmbaq288-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cmart313-agent @mcojwvmgw\" name=\"cmart313-agent\" subscription=\"both\"><group>hotel agents</group></item><item jid=\"fomanagers-agent @mcojwvmgw\" name=\"fomanagers-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rbhay068-agent @mcojwvmgw\" name=\"rbhay068-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mholo452-agent @mcojwvmgw\" name=\"mholo452-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jague854-agent @mcojwvmgw\" name=\"jague854-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jsmck000-agent @mcojwvmgw\" name=\"jsmck000-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rewhi833-agent @mcojwvmgw\" name=\"rewhi833-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kharr092-agent @mcojwvmgw\" name=\"kharr092-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"omich474-agent @mcojwvmgw\" name=\"omich474-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jsnog433-agent @mcojwvmgw\" name=\"jsnog433-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"mschu194-agent @mcojwvmgw\" name=\"mschu194-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ajpet711-agent @mcojwvmgw\" name=\"ajpet711-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"amlam647-agent @mcojwvmgw\" name=\"amlam647-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"rjbro744-agent @mcojwvmgw\" name=\"rjbro744-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"hharp143-agent @mcojwvmgw\" name=\"hharp143-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"koted281-agent @mcojwvmgw\" name=\"koted281-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"roomscontrol-agent @mcojwvmgw\" name=\"roomscontrol-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"afole237-agent @mcojwvmgw\" name=\"afole237-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"bkbry561-agent @mcojwvmgw\" name=\"bkbry561-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jdele146-agent @mcojwvmgw\" name=\"jdele146-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kbonh458-agent @mcojwvmgw\" name=\"kbonh458-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"klwal096-agent @mcojwvmgw\" name=\"klwal096-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"thcoo056-agent @mcojwvmgw\" name=\"thcoo056-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"engineeringdl-agent @mcojwvmgw\" name=\"engineeringdl-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jnest091-agent @mcojwvmgw\" name=\"jnest091-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"ctomi199-agent @mcojwvmgw\" name=\"ctomi199-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"nmwei389-agent @mcojwvmgw\" name=\"nmwei389-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"pmstj367-agent @mcojwvmgw\" name=\"pmstj367-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jmont857-agent @mcojwvmgw\" name=\"jmont857-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"sspry563-agent @mcojwvmgw\" name=\"sspry563-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jsans788-agent @mcojwvmgw\" name=\"jsans788-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"kosor263-agent @mcojwvmgw\" name=\"kosor263-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"cmces229-agent @mcojwvmgw\" name=\"cmces229-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"bcurr406-agent @mcojwvmgw\" name=\"bcurr406-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"arcor356-agent @mcojwvmgw\" name=\"arcor356-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item><item jid=\"jgonz045-agent @mcojwvmgw\" name=\"jgonz045-agent\" subscription=\"both\"><group>hotel agents</group><group>hotel agents</group></item></query></iq></body>";
        

        [Fact]
        public void GroupTest()
        {
            XmppXElement xmpp2 = XmppXElement.LoadXml(xml2);
            XmppXElement xmpp3 = XmppXElement.LoadXml(xml3);

            Assert.Equal(true, xmpp2 is RosterItem);
            Assert.Equal(true, xmpp3 is RosterItem);

            RosterItem ri2 = xmpp2 as RosterItem;
            RosterItem ri3 = xmpp3 as RosterItem;

            Assert.Equal(3, ri2.GetGroups().Count);
            Assert.Equal(0, ri3.GetGroups().Count);

            ri3.AddGroup("Test");
            Assert.Equal(1, ri3.GetGroups().Count);
            Assert.Equal("Test", ri3.GetGroups()[0]);

            //var riq = new Matrix.Xmpp.Client.RosterIq {Type = Matrix.Xmpp.IqType.result};
            //foreach (Result r in Results)
            //{
            //    riq.Roster.AddRosterItem(new RosterItem(r.jid, r.name, r.group));
            //}
            //connection.send(riq);
        }

        [Fact]
        public void TestApproved()
        {
            //  <item jid='benvolio@example.org'
            //xmlns='jabber:iq:roster' 
            //name='Benvolio'
            //subscription='both'
            //approved='true'/>";
            XmppXElement xmpp4 = XmppXElement.LoadXml(xml4);
            RosterItem ri = xmpp4 as RosterItem;
            Assert.Equal(ri.Approved, true);

            ri.Approved = false;

            ri.ShouldBe(xml3);
        }

        [Fact]
        public void TestRoster()
        {
            var r = new Matrix.Xmpp.Roster.Roster();
            for (int i = 0; i < 10; i++)
            {
                r.AddRosterItem(new RosterItem
                                    {
                                        Jid = "test" + i + "@server.com",
                                        Name = "test" + i
                                    });
            }
            
            foreach (RosterItem rosterItem in r.GetRoster())
            {
                
            }
        }

        [Fact]
        public void TestRosterContains()
        {
            //var roster = new Matrix.Xmpp.Roster.Roster();
            //Assert.Equal(roster.Contains("foo@localhost"), false);

            //roster.AddRosterItem(new RosterItem
            //{
            //    Jid = "foo@localhost",
            //    Name = "Foo"
            //});

            //Assert.Equal(roster.Contains("foo@localhost"), true);
            //Assert.Equal(roster.Contains("bar@localhost"), false);
        }

        [Fact]
        public void AskTest1(){
            
            XmppXElement xmpp5 = XmppXElement.LoadXml(xml5);
            RosterItem ri = xmpp5 as RosterItem;
            Assert.Equal(ri.Ask == Ask.Subscribe, true);
        }

        [Fact]
        public void AskTest2()
        {
            XmppXElement xmpp6 = XmppXElement.LoadXml(xml6);
            RosterItem ri = xmpp6 as RosterItem;
            Assert.Equal(ri.Ask == Ask.Unsubscribe, true);
        }

        [Fact]
        public void AskTest3()
        {
            XmppXElement xmpp7 = XmppXElement.LoadXml(xml7);
            RosterItem ri = xmpp7 as RosterItem;
            Assert.Equal(ri.Ask == Ask.None, true);
        }

        [Fact]
        public void SubscriptionTest1()
        {
            XmppXElement xmpp2 = XmppXElement.LoadXml(xml2);
            RosterItem ri = xmpp2 as RosterItem;
            Assert.Equal(ri.Subscription == Subscription.Both, true);
        }

        [Fact]
        public void SubscriptionTest2()
        {
            XmppXElement xmpp6 = XmppXElement.LoadXml(xml6);
            RosterItem ri = xmpp6 as RosterItem;
            Assert.Equal(ri.Subscription == Subscription.From, true);
        }

        [Fact]
        public void LoadBigRosterFromBoshBody()
        {
            XmppXElement body = XmppXElement.LoadXml(xml8);

            Assert.Equal(true, body is Body);

            var iq = body.Element<Iq>();
            var roster = iq.Element<Matrix.Xmpp.Roster.Roster>();
            roster.GetRoster().Count().ShouldBe(316);
        }
    }
}